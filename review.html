<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Review - Toilet Review System</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        /* Loading States for Review Page */
        .review-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(2px);
        }

        .review-loading-overlay.hidden {
            display: none;
        }

        .review-loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #007bff;
            border-radius: 50%;
            animation: reviewSpin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes reviewSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .review-loading-text {
            color: #333;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
        }

        /* Button Loading States */
        button.loading {
            position: relative;
            color: transparent !important;
            pointer-events: none;
        }

        button.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: reviewButtonSpin 1s linear infinite;
        }

        @keyframes reviewButtonSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <h1>Toilet Review System</h1>
            <div class="nav-links">
                <a href="index.html">Home</a>
            </div>
        </div>
    </nav>

    <!-- Loading Overlay -->
    <div id="reviewLoading" class="review-loading-overlay">
        <div class="review-loading-spinner"></div>
        <div class="review-loading-text">Loading Review System...</div>
    </div>

    <main>
        <div id="qr-reader-section" class="scanner-container">
            <div id="qr-reader"></div>
            <div class="scanner-instructions">
                <h3>Scan QR Code</h3>
                <p>Point your camera at the toilet's QR code to begin your review.</p>
            </div>
        </div>

        <div id="toiletInfo" class="toilet-info" style="display: none;">
            <!-- Toilet information will be loaded here -->
        </div>

        <div id="reviewFormSection" class="section" style="display: none;">
            <h2>Submit Your Review</h2>
            <form id="reviewForm">
                <div class="rating-group">
                    <label>Overall Rating:</label>
                    <div class="star-rating">
                        <input type="radio" name="rating" value="5" id="rating5" required><label for="rating5">â˜…</label>
                        <input type="radio" name="rating" value="4" id="rating4"><label for="rating4">â˜…</label>
                        <input type="radio" name="rating" value="3" id="rating3"><label for="rating3">â˜…</label>
                        <input type="radio" name="rating" value="2" id="rating2"><label for="rating2">â˜…</label>
                        <input type="radio" name="rating" value="1" id="rating1"><label for="rating1">â˜…</label>
                    </div>
                </div>

                <div class="rating-group">
                    <label>Cleanliness:</label>
                    <div class="star-rating">
                        <input type="radio" name="cleanliness" value="5" id="clean5" required><label for="clean5">â˜…</label>
                        <input type="radio" name="cleanliness" value="4" id="clean4"><label for="clean4">â˜…</label>
                        <input type="radio" name="cleanliness" value="3" id="clean3"><label for="clean3">â˜…</label>
                        <input type="radio" name="cleanliness" value="2" id="clean2"><label for="clean2">â˜…</label>
                        <input type="radio" name="cleanliness" value="1" id="clean1"><label for="clean1">â˜…</label>
                    </div>
                </div>

                <div class="rating-group">
                    <label>Maintenance:</label>
                    <div class="star-rating">
                        <input type="radio" name="maintenance" value="5" id="maint5" required><label for="maint5">â˜…</label>
                        <input type="radio" name="maintenance" value="4" id="maint4"><label for="maint4">â˜…</label>
                        <input type="radio" name="maintenance" value="3" id="maint3"><label for="maint3">â˜…</label>
                        <input type="radio" name="maintenance" value="2" id="maint2"><label for="maint2">â˜…</label>
                        <input type="radio" name="maintenance" value="1" id="maint1"><label for="maint1">â˜…</label>
                    </div>
                </div>

                <div class="rating-group">
                    <label>Accessibility:</label>
                    <div class="star-rating">
                        <input type="radio" name="accessibility" value="5" id="access5" required><label for="access5">â˜…</label>
                        <input type="radio" name="accessibility" value="4" id="access4"><label for="access4">â˜…</label>
                        <input type="radio" name="accessibility" value="3" id="access3"><label for="access3">â˜…</label>
                        <input type="radio" name="accessibility" value="2" id="access2"><label for="access2">â˜…</label>
                        <input type="radio" name="accessibility" value="1" id="access1"><label for="access1">â˜…</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="comments">Share your experience:</label>
                    <textarea id="comments" name="comments" rows="4" required></textarea>
                </div>

                <button type="submit">Submit Review</button>
            </form>
        </div>

        <div id="successMessage" class="section" style="display: none;">
            <div class="celebration-icon">ðŸŽ‰</div>
            <h2>Thank you for your review!</h2>
            <p>Your feedback helps improve facilities for everyone.</p>
            <div class="action-buttons">
                <button id="scanNewQR" class="primary-button">Scan Another QR Code</button>
                <a href="index.html" class="secondary-button">Return Home</a>
            </div>
            <div id="confettiContainer"></div>
        </div>
    </main>

    <script src="js/review.js"></script>
</body>
</html> 