/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.js"
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToiletReviewApp: () => (/* binding */ ToiletReviewApp),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   toiletReviewApp: () => (/* binding */ toiletReviewApp)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/esm/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _core_config_app_config_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/config/app.config.js */ \"./src/core/config/app.config.js\");\n/* harmony import */ var _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./state/store/app.store.js */ \"./src/state/store/app.store.js\");\n/* harmony import */ var _services_api_base_api_service_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./services/api/base-api.service.js */ \"./src/services/api/base-api.service.js\");\n/* harmony import */ var _core_utils_dom_utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./core/utils/dom.utils.js */ \"./src/core/utils/dom.utils.js\");\n\n\n\n\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n/**\n * Main Application Entry Point\n * Orchestrates all modules and initializes the application\n * Follows the Facade Pattern - provides single interface to complex system\n */\n\n\n\n\n\n\n/**\n * Main Application Class\n * Coordinates all modules and manages application lifecycle\n */\nvar ToiletReviewApp = /*#__PURE__*/function () {\n  function ToiletReviewApp() {\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this, ToiletReviewApp);\n    this.modules = new Map();\n    this.initialized = false;\n    this.currentPage = null;\n\n    // Bind methods\n    this.init = this.init.bind(this);\n    this.destroy = this.destroy.bind(this);\n    this.navigateTo = this.navigateTo.bind(this);\n    this.handleGlobalError = this.handleGlobalError.bind(this);\n    this.handleUnhandledRejection = this.handleUnhandledRejection.bind(this);\n    console.log('[APP] Toilet Review Application created');\n  }\n\n  /**\n   * Initialize the application\n   * @returns {Promise} Initialization promise\n   */\n  return (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(ToiletReviewApp, [{\n    key: \"init\",\n    value: (function () {\n      var _init = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee() {\n        var _t;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              console.log('[APP] Initializing Toilet Review Application...');\n\n              // Set up global error handlers\n              this.setupGlobalErrorHandlers();\n\n              // Initialize core systems\n              _context.next = 1;\n              return this.initializeCoreSystems();\n            case 1:\n              _context.next = 2;\n              return this.initializePageModules();\n            case 2:\n              // Set up global event listeners\n              this.setupGlobalEventListeners();\n              this.initialized = true;\n              console.log('[APP] Application initialized successfully');\n\n              // Dispatch app ready event\n              window.dispatchEvent(new CustomEvent('app:ready', {\n                detail: {\n                  app: this,\n                  config: _core_config_app_config_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]\n                }\n              }));\n              _context.next = 4;\n              break;\n            case 3:\n              _context.prev = 3;\n              _t = _context[\"catch\"](0);\n              console.error('[APP] Initialization failed:', _t);\n              this.handleInitializationError(_t);\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[0, 3]]);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * Set up global error handlers\n     */\n    )\n  }, {\n    key: \"setupGlobalErrorHandlers\",\n    value: function setupGlobalErrorHandlers() {\n      var _this = this;\n      // Handle unhandled promise rejections\n      window.addEventListener('unhandledrejection', this.handleUnhandledRejection);\n\n      // Handle global errors\n      window.addEventListener('error', this.handleGlobalError);\n\n      // Handle app-specific errors\n      _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].subscribe('app:error', function (event, data) {\n        console.error('[APP] Application error:', data);\n        _this.showErrorNotification(data.message || 'An application error occurred');\n      });\n    }\n\n    /**\n     * Handle unhandled promise rejections\n     * @param {PromiseRejectionEvent} event - Rejection event\n     */\n  }, {\n    key: \"handleUnhandledRejection\",\n    value: function handleUnhandledRejection(event) {\n      console.error('[APP] Unhandled promise rejection:', event.reason);\n      event.preventDefault();\n      _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].addNotification({\n        type: 'error',\n        title: 'Application Error',\n        message: 'An unexpected error occurred. Please refresh the page.',\n        duration: 0 // Don't auto-remove critical errors\n      });\n    }\n\n    /**\n     * Handle global errors\n     * @param {ErrorEvent} event - Error event\n     */\n  }, {\n    key: \"handleGlobalError\",\n    value: function handleGlobalError(event) {\n      console.error('[APP] Global error:', event.error);\n\n      // Only show notification for non-script errors\n      if (!event.filename || !event.filename.includes('.js')) {\n        _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].addNotification({\n          type: 'error',\n          title: 'Application Error',\n          message: 'Something went wrong. Please try again.',\n          duration: 5000\n        });\n      }\n    }\n\n    /**\n     * Initialize core systems\n     * @returns {Promise} Initialization promise\n     */\n  }, {\n    key: \"initializeCoreSystems\",\n    value: (function () {\n      var _initializeCoreSystems = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee2() {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log('[APP] Initializing core systems...');\n\n              // Initialize API service with authentication interceptor\n              this.initializeApiService();\n\n              // Initialize state management\n              this.initializeStateManagement();\n\n              // Initialize performance monitoring\n              this.initializePerformanceMonitoring();\n              console.log('[APP] Core systems initialized');\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function initializeCoreSystems() {\n        return _initializeCoreSystems.apply(this, arguments);\n      }\n      return initializeCoreSystems;\n    }()\n    /**\n     * Initialize API service with interceptors\n     */\n    )\n  }, {\n    key: \"initializeApiService\",\n    value: function initializeApiService() {\n      // Add authentication request interceptor\n      _services_api_base_api_service_js__WEBPACK_IMPORTED_MODULE_8__.baseApiService.addRequestInterceptor(/*#__PURE__*/function () {\n        var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee3(options) {\n          var token;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                token = _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getState().user.token;\n                if (token) {\n                  options.headers = _objectSpread(_objectSpread({}, options.headers), {}, {\n                    'Authorization': \"Bearer \".concat(token)\n                  });\n                }\n                return _context3.abrupt(\"return\", options);\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n\n      // Add response interceptor for error handling\n      _services_api_base_api_service_js__WEBPACK_IMPORTED_MODULE_8__.baseApiService.addResponseInterceptor(/*#__PURE__*/function () {\n        var _ref2 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee4(data, response) {\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(data && (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(data) === 'object')) {\n                  _context4.next = 2;\n                  break;\n                }\n                if (!(data.success === false && data.message)) {\n                  _context4.next = 1;\n                  break;\n                }\n                throw new Error(data.message);\n              case 1:\n                if (!(data.success && data.data)) {\n                  _context4.next = 2;\n                  break;\n                }\n                return _context4.abrupt(\"return\", data.data);\n              case 2:\n                return _context4.abrupt(\"return\", data);\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4);\n        }));\n        return function (_x2, _x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n\n      // Add loading state management\n      _services_api_base_api_service_js__WEBPACK_IMPORTED_MODULE_8__.baseApiService.addRequestInterceptor(/*#__PURE__*/function () {\n        var _ref3 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee5(options) {\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context5) {\n            while (1) switch (_context5.prev = _context5.next) {\n              case 0:\n                _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setLoading('api', true);\n                return _context5.abrupt(\"return\", options);\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }, _callee5);\n        }));\n        return function (_x4) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n      _services_api_base_api_service_js__WEBPACK_IMPORTED_MODULE_8__.baseApiService.addResponseInterceptor(/*#__PURE__*/function () {\n        var _ref4 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee6(data, response) {\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setLoading('api', false);\n                return _context6.abrupt(\"return\", data);\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }, _callee6);\n        }));\n        return function (_x5, _x6) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n    }\n\n    /**\n     * Initialize state management\n     */\n  }, {\n    key: \"initializeStateManagement\",\n    value: function initializeStateManagement() {\n      var _this2 = this;\n      // Set up state change observers\n      _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].subscribe('state:changed', function (event, data) {\n        console.log('[APP] State changed:', data.changes);\n        _this2.handleStateChange(data);\n      });\n\n      // Initialize user authentication state from localStorage\n      var token = localStorage.getItem('adminToken') || localStorage.getItem('token');\n      if (token) {\n        try {\n          // Validate token format (basic check)\n          if (token.split('.').length === 3) {\n            _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setUser(true, null, token);\n            console.log('[APP] Restored authentication from localStorage');\n          }\n        } catch (error) {\n          console.warn('[APP] Invalid token in localStorage, clearing');\n          localStorage.removeItem('adminToken');\n          localStorage.removeItem('token');\n        }\n      }\n    }\n\n    /**\n     * Handle state changes\n     * @param {object} changeData - State change data\n     */\n  }, {\n    key: \"handleStateChange\",\n    value: function handleStateChange(changeData) {\n      // Handle authentication state changes\n      if (changeData.changes['user.isAuthenticated']) {\n        this.handleAuthenticationChange(changeData.changes['user.isAuthenticated'].to);\n      }\n\n      // Handle loading state changes\n      if (changeData.changes['loading.global']) {\n        this.handleLoadingChange(changeData.changes['loading.global'].to);\n      }\n    }\n\n    /**\n     * Handle authentication state changes\n     * @param {boolean} isAuthenticated - New authentication state\n     */\n  }, {\n    key: \"handleAuthenticationChange\",\n    value: function handleAuthenticationChange(isAuthenticated) {\n      if (isAuthenticated) {\n        console.log('[APP] User authenticated');\n        // Update UI for authenticated user\n        this.updateAuthenticatedUI(true);\n      } else {\n        console.log('[APP] User logged out');\n        // Update UI for unauthenticated user\n        this.updateAuthenticatedUI(false);\n      }\n    }\n\n    /**\n     * Handle loading state changes\n     * @param {boolean} isLoading - New loading state\n     */\n  }, {\n    key: \"handleLoadingChange\",\n    value: function handleLoadingChange(isLoading) {\n      var loadingOverlay = (0,_core_utils_dom_utils_js__WEBPACK_IMPORTED_MODULE_9__.$)('#globalLoading');\n      if (loadingOverlay) {\n        if (isLoading) {\n          loadingOverlay.classList.remove('hidden');\n        } else {\n          loadingOverlay.classList.add('hidden');\n        }\n      }\n    }\n\n    /**\n     * Update UI based on authentication state\n     * @param {boolean} isAuthenticated - Authentication state\n     */\n  }, {\n    key: \"updateAuthenticatedUI\",\n    value: function updateAuthenticatedUI(isAuthenticated) {\n      // Update navigation elements\n      var adminLinks = document.querySelectorAll('.admin-link');\n      var logoutButtons = document.querySelectorAll('.logout-btn');\n      adminLinks.forEach(function (link) {\n        link.style.display = isAuthenticated ? 'inline' : 'none';\n      });\n      logoutButtons.forEach(function (button) {\n        button.style.display = isAuthenticated ? 'inline' : 'none';\n      });\n    }\n\n    /**\n     * Initialize performance monitoring\n     */\n  }, {\n    key: \"initializePerformanceMonitoring\",\n    value: function initializePerformanceMonitoring() {\n      // Monitor page load performance\n      if (window.performance && window.performance.timing) {\n        window.addEventListener('load', function () {\n          var perfData = window.performance.timing;\n          var loadTime = perfData.loadEventEnd - perfData.navigationStart;\n          console.log(\"[PERF] Page load time: \".concat(loadTime, \"ms\"));\n\n          // Track performance metrics if enabled\n          if (_core_config_app_config_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].features.enableAnalytics) {\n            // Could send to analytics service\n            _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].notify('performance:pageLoad', {\n              loadTime: loadTime\n            });\n          }\n        });\n      }\n\n      // Monitor memory usage (if supported)\n      if (window.performance && window.performance.memory) {\n        setInterval(function () {\n          var memInfo = window.performance.memory;\n          console.log(\"[PERF] Memory: \".concat(Math.round(memInfo.usedJSHeapSize / 1024 / 1024), \"MB used\"));\n        }, 30000); // Every 30 seconds\n      }\n    }\n\n    /**\n     * Initialize page-specific modules\n     * @returns {Promise} Initialization promise\n     */\n  }, {\n    key: \"initializePageModules\",\n    value: (function () {\n      var _initializePageModules = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee7() {\n        var currentPath;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              currentPath = window.location.pathname;\n              console.log('[APP] Initializing page modules for path:', currentPath);\n\n              // Determine which page we're on\n              if (!(currentPath === '/' || currentPath === '/index.html')) {\n                _context7.next = 2;\n                break;\n              }\n              _context7.next = 1;\n              return this.initializeHomePage();\n            case 1:\n              _context7.next = 5;\n              break;\n            case 2:\n              if (!(currentPath === '/admin.html')) {\n                _context7.next = 4;\n                break;\n              }\n              _context7.next = 3;\n              return this.initializeAdminPage();\n            case 3:\n              _context7.next = 5;\n              break;\n            case 4:\n              if (!(currentPath === '/review.html')) {\n                _context7.next = 5;\n                break;\n              }\n              _context7.next = 5;\n              return this.initializeReviewPage();\n            case 5:\n              console.log('[APP] Page modules initialized');\n            case 6:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function initializePageModules() {\n        return _initializePageModules.apply(this, arguments);\n      }\n      return initializePageModules;\n    }()\n    /**\n     * Initialize home page modules\n     * @returns {Promise} Initialization promise\n     */\n    )\n  }, {\n    key: \"initializeHomePage\",\n    value: (function () {\n      var _initializeHomePage = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee8() {\n        var _yield$import, HomePage, homePage, _t2;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              this.currentPage = 'home';\n              console.log('[APP] Initializing home page modules');\n\n              // Dynamic import for code splitting\n              _context8.prev = 1;\n              _context8.next = 2;\n              return Promise.all(/*! import() */[__webpack_require__.e(\"vendors\"), __webpack_require__.e(\"src_pages_shared_page_base_js\"), __webpack_require__.e(\"src_pages_home_home_page_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./pages/home/home.page.js */ \"./src/pages/home/home.page.js\"));\n            case 2:\n              _yield$import = _context8.sent;\n              HomePage = _yield$import.HomePage;\n              homePage = new HomePage();\n              _context8.next = 3;\n              return homePage.init();\n            case 3:\n              this.modules.set('homePage', homePage);\n              console.log('[APP] Home page initialized');\n              _context8.next = 5;\n              break;\n            case 4:\n              _context8.prev = 4;\n              _t2 = _context8[\"catch\"](1);\n              console.error('[APP] Failed to load home page module:', _t2);\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this, [[1, 4]]);\n      }));\n      function initializeHomePage() {\n        return _initializeHomePage.apply(this, arguments);\n      }\n      return initializeHomePage;\n    }()\n    /**\n     * Initialize admin page modules\n     * @returns {Promise} Initialization promise\n     */\n    )\n  }, {\n    key: \"initializeAdminPage\",\n    value: (function () {\n      var _initializeAdminPage = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee9() {\n        var _yield$import2, AdminPage, adminPage, _t3;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              this.currentPage = 'admin';\n              console.log('[APP] Initializing admin page modules');\n              _context9.prev = 1;\n              _context9.next = 2;\n              return Promise.all(/*! import() */[__webpack_require__.e(\"core\"), __webpack_require__.e(\"services\"), __webpack_require__.e(\"vendors\"), __webpack_require__.e(\"src_pages_shared_page_base_js\"), __webpack_require__.e(\"src_pages_admin_admin_page_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./pages/admin/admin.page.js */ \"./src/pages/admin/admin.page.js\"));\n            case 2:\n              _yield$import2 = _context9.sent;\n              AdminPage = _yield$import2.AdminPage;\n              adminPage = new AdminPage();\n              _context9.next = 3;\n              return adminPage.init();\n            case 3:\n              this.modules.set('adminPage', adminPage);\n              console.log('[APP] Admin page initialized');\n              _context9.next = 5;\n              break;\n            case 4:\n              _context9.prev = 4;\n              _t3 = _context9[\"catch\"](1);\n              console.error('[APP] Failed to load admin page module:', _t3);\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this, [[1, 4]]);\n      }));\n      function initializeAdminPage() {\n        return _initializeAdminPage.apply(this, arguments);\n      }\n      return initializeAdminPage;\n    }()\n    /**\n     * Initialize review page modules\n     * @returns {Promise} Initialization promise\n     */\n    )\n  }, {\n    key: \"initializeReviewPage\",\n    value: (function () {\n      var _initializeReviewPage = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.mark(function _callee0() {\n        var _yield$import3, ReviewPage, reviewPage, _t4;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_5__.wrap(function (_context0) {\n          while (1) switch (_context0.prev = _context0.next) {\n            case 0:\n              this.currentPage = 'review';\n              console.log('[APP] Initializing review page modules');\n              _context0.prev = 1;\n              _context0.next = 2;\n              return Promise.all(/*! import() */[__webpack_require__.e(\"core\"), __webpack_require__.e(\"services\"), __webpack_require__.e(\"vendors\"), __webpack_require__.e(\"src_pages_shared_page_base_js\"), __webpack_require__.e(\"src_pages_review_review_page_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./pages/review/review.page.js */ \"./src/pages/review/review.page.js\"));\n            case 2:\n              _yield$import3 = _context0.sent;\n              ReviewPage = _yield$import3.ReviewPage;\n              reviewPage = new ReviewPage();\n              _context0.next = 3;\n              return reviewPage.init();\n            case 3:\n              this.modules.set('reviewPage', reviewPage);\n              console.log('[APP] Review page initialized');\n              _context0.next = 5;\n              break;\n            case 4:\n              _context0.prev = 4;\n              _t4 = _context0[\"catch\"](1);\n              console.error('[APP] Failed to load review page module:', _t4);\n            case 5:\n            case \"end\":\n              return _context0.stop();\n          }\n        }, _callee0, this, [[1, 4]]);\n      }));\n      function initializeReviewPage() {\n        return _initializeReviewPage.apply(this, arguments);\n      }\n      return initializeReviewPage;\n    }()\n    /**\n     * Set up global event listeners\n     */\n    )\n  }, {\n    key: \"setupGlobalEventListeners\",\n    value: function setupGlobalEventListeners() {\n      var _this3 = this;\n      // Handle navigation\n      document.addEventListener('click', function (event) {\n        if (event.target.matches('[data-navigate]')) {\n          event.preventDefault();\n          var target = event.target.getAttribute('data-navigate');\n          _this3.navigateTo(target);\n        }\n      });\n\n      // Handle form submissions globally\n      document.addEventListener('submit', function (event) {\n        // Let individual components handle their forms\n        // This is just for global form handling if needed\n      });\n\n      // Handle keyboard shortcuts\n      document.addEventListener('keydown', function (event) {\n        // ESC key handling\n        if (event.key === 'Escape') {\n          // Close modals, clear selections, etc.\n          _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setState(function (prevState) {\n            return _objectSpread(_objectSpread({}, prevState), {}, {\n              ui: _objectSpread(_objectSpread({}, prevState.ui), {}, {\n                activeModal: null\n              })\n            });\n          });\n        }\n      });\n\n      // Handle online/offline status\n      window.addEventListener('online', function () {\n        _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].addNotification({\n          type: 'success',\n          title: 'Connection Restored',\n          message: 'You are back online',\n          duration: 3000\n        });\n      });\n      window.addEventListener('offline', function () {\n        _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].addNotification({\n          type: 'warning',\n          title: 'Connection Lost',\n          message: 'You are currently offline',\n          duration: 0 // Don't auto-remove\n        });\n      });\n    }\n\n    /**\n     * Navigate to a different page or section\n     * @param {string} target - Navigation target\n     */\n  }, {\n    key: \"navigateTo\",\n    value: function navigateTo(target) {\n      console.log('[APP] Navigating to:', target);\n\n      // Handle different navigation types\n      if (target.startsWith('http')) {\n        window.location.href = target;\n      } else if (target === 'home') {\n        window.location.href = '/';\n      } else if (target === 'admin') {\n        window.location.href = '/admin.html';\n      } else if (target === 'review') {\n        window.location.href = '/review.html';\n      } else {\n        // Handle in-page navigation (scrolling, modals, etc.)\n        this.handleInPageNavigation(target);\n      }\n    }\n\n    /**\n     * Handle in-page navigation\n     * @param {string} target - Navigation target\n     */\n  }, {\n    key: \"handleInPageNavigation\",\n    value: function handleInPageNavigation(target) {\n      if (target.startsWith('#')) {\n        // Handle anchor links\n        var element = (0,_core_utils_dom_utils_js__WEBPACK_IMPORTED_MODULE_9__.$)(target);\n        if (element) {\n          element.scrollIntoView({\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // Handle other in-page navigation\n        console.log('[APP] In-page navigation to:', target);\n      }\n    }\n\n    /**\n     * Show error notification\n     * @param {string} message - Error message\n     */\n  }, {\n    key: \"showErrorNotification\",\n    value: function showErrorNotification(message) {\n      _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].addNotification({\n        type: 'error',\n        title: 'Error',\n        message: message,\n        duration: 5000\n      });\n    }\n\n    /**\n     * Handle initialization errors\n     * @param {Error} error - Initialization error\n     */\n  }, {\n    key: \"handleInitializationError\",\n    value: function handleInitializationError(error) {\n      console.error('[APP] Initialization error:', error);\n\n      // Show error in UI\n      var loadingOverlay = (0,_core_utils_dom_utils_js__WEBPACK_IMPORTED_MODULE_9__.$)('#globalLoading');\n      if (loadingOverlay) {\n        loadingOverlay.innerHTML = \"\\n                <div class=\\\"global-loading-spinner\\\"></div>\\n                <div class=\\\"global-loading-text\\\">\\n                    Failed to initialize application.<br>\\n                    <small>\".concat(error.message, \"</small><br><br>\\n                    <button onclick=\\\"window.location.reload()\\\" style=\\\"padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;\\\">\\n                        Reload Page\\n                    </button>\\n                </div>\\n            \");\n      }\n    }\n\n    /**\n     * Destroy the application and clean up resources\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      console.log('[APP] Destroying application...');\n\n      // Remove event listeners\n      window.removeEventListener('unhandledrejection', this.handleUnhandledRejection);\n      window.removeEventListener('error', this.handleGlobalError);\n\n      // Destroy modules\n      this.modules.forEach(function (module, name) {\n        if (typeof module.destroy === 'function') {\n          try {\n            module.destroy();\n            console.log(\"[APP] Destroyed module: \".concat(name));\n          } catch (error) {\n            console.error(\"[APP] Error destroying module \".concat(name, \":\"), error);\n          }\n        }\n      });\n\n      // Clear modules map\n      this.modules.clear();\n\n      // Reset store\n      _state_store_app_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].resetState();\n      this.initialized = false;\n      console.log('[APP] Application destroyed');\n    }\n\n    /**\n     * Get application info\n     * @returns {object} Application information\n     */\n  }, {\n    key: \"getInfo\",\n    value: function getInfo() {\n      return {\n        name: _core_config_app_config_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].name,\n        version: _core_config_app_config_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].version,\n        initialized: this.initialized,\n        currentPage: this.currentPage,\n        modules: Array.from(this.modules.keys()),\n        environment: _core_config_app_config_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].environment\n      };\n    }\n  }]);\n}();\n\n// Create singleton instance\nvar toiletReviewApp = new ToiletReviewApp();\n\n// Auto-initialize when DOM is ready (if not using manual initialization)\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', function () {\n    toiletReviewApp.init().catch(function (error) {\n      console.error('[APP] Auto-initialization failed:', error);\n    });\n  });\n} else {\n  // DOM already loaded\n  toiletReviewApp.init().catch(function (error) {\n    console.error('[APP] Auto-initialization failed:', error);\n  });\n}\n\n// Export default\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (toiletReviewApp);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUE1QkE7QUFBQTtBQUFBO0FBQUE7QUE4QkE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFLQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBYkE7QUFBQTtBQUFBO0FBQUE7QUFlQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWZBO0FBQUE7QUFBQTtBQUFBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBZkE7QUFBQTtBQUFBO0FBQUE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQWRBO0FBQUE7QUFBQTtBQUFBO0FBZ0JBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFLQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUtBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFJQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvaWxldC1yZXZpZXctc3lzdGVtLWZyb250ZW5kLy4vc3JjL2FwcC5qcz8xMTEyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFpbiBBcHBsaWNhdGlvbiBFbnRyeSBQb2ludFxuICogT3JjaGVzdHJhdGVzIGFsbCBtb2R1bGVzIGFuZCBpbml0aWFsaXplcyB0aGUgYXBwbGljYXRpb25cbiAqIEZvbGxvd3MgdGhlIEZhY2FkZSBQYXR0ZXJuIC0gcHJvdmlkZXMgc2luZ2xlIGludGVyZmFjZSB0byBjb21wbGV4IHN5c3RlbVxuICovXG5cbmltcG9ydCBBcHBDb25maWcgZnJvbSAnLi9jb3JlL2NvbmZpZy9hcHAuY29uZmlnLmpzJztcbmltcG9ydCBhcHBTdG9yZSBmcm9tICcuL3N0YXRlL3N0b3JlL2FwcC5zdG9yZS5qcyc7XG5pbXBvcnQgeyBiYXNlQXBpU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvYXBpL2Jhc2UtYXBpLnNlcnZpY2UuanMnO1xuaW1wb3J0IHsgJCB9IGZyb20gJy4vY29yZS91dGlscy9kb20udXRpbHMuanMnO1xuXG4vKipcbiAqIE1haW4gQXBwbGljYXRpb24gQ2xhc3NcbiAqIENvb3JkaW5hdGVzIGFsbCBtb2R1bGVzIGFuZCBtYW5hZ2VzIGFwcGxpY2F0aW9uIGxpZmVjeWNsZVxuICovXG5leHBvcnQgY2xhc3MgVG9pbGV0UmV2aWV3QXBwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5tb2R1bGVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBudWxsO1xuXG4gICAgICAgIC8vIEJpbmQgbWV0aG9kc1xuICAgICAgICB0aGlzLmluaXQgPSB0aGlzLmluaXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXN0cm95ID0gdGhpcy5kZXN0cm95LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmF2aWdhdGVUbyA9IHRoaXMubmF2aWdhdGVUby5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUdsb2JhbEVycm9yID0gdGhpcy5oYW5kbGVHbG9iYWxFcnJvci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbiA9IHRoaXMuaGFuZGxlVW5oYW5kbGVkUmVqZWN0aW9uLmJpbmQodGhpcyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIFRvaWxldCBSZXZpZXcgQXBwbGljYXRpb24gY3JlYXRlZCcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGFwcGxpY2F0aW9uXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEluaXRpYWxpemF0aW9uIHByb21pc2VcbiAgICAgKi9cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIEluaXRpYWxpemluZyBUb2lsZXQgUmV2aWV3IEFwcGxpY2F0aW9uLi4uJyk7XG5cbiAgICAgICAgICAgIC8vIFNldCB1cCBnbG9iYWwgZXJyb3IgaGFuZGxlcnNcbiAgICAgICAgICAgIHRoaXMuc2V0dXBHbG9iYWxFcnJvckhhbmRsZXJzKCk7XG5cbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgY29yZSBzeXN0ZW1zXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVDb3JlU3lzdGVtcygpO1xuXG4gICAgICAgICAgICAvLyBMb2FkIHBhZ2Utc3BlY2lmaWMgbW9kdWxlcyBiYXNlZCBvbiBjdXJyZW50IHBhZ2VcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBhZ2VNb2R1bGVzKCk7XG5cbiAgICAgICAgICAgIC8vIFNldCB1cCBnbG9iYWwgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAgICB0aGlzLnNldHVwR2xvYmFsRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0FQUF0gQXBwbGljYXRpb24gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAgICAgICAgIC8vIERpc3BhdGNoIGFwcCByZWFkeSBldmVudFxuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdhcHA6cmVhZHknLCB7XG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7IGFwcDogdGhpcywgY29uZmlnOiBBcHBDb25maWcgfVxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQVBQXSBJbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbml0aWFsaXphdGlvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBnbG9iYWwgZXJyb3IgaGFuZGxlcnNcbiAgICAgKi9cbiAgICBzZXR1cEdsb2JhbEVycm9ySGFuZGxlcnMoKSB7XG4gICAgICAgIC8vIEhhbmRsZSB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCB0aGlzLmhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbik7XG5cbiAgICAgICAgLy8gSGFuZGxlIGdsb2JhbCBlcnJvcnNcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5oYW5kbGVHbG9iYWxFcnJvcik7XG5cbiAgICAgICAgLy8gSGFuZGxlIGFwcC1zcGVjaWZpYyBlcnJvcnNcbiAgICAgICAgYXBwU3RvcmUuc3Vic2NyaWJlKCdhcHA6ZXJyb3InLCAoZXZlbnQsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBUFBdIEFwcGxpY2F0aW9uIGVycm9yOicsIGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JOb3RpZmljYXRpb24oZGF0YS5tZXNzYWdlIHx8ICdBbiBhcHBsaWNhdGlvbiBlcnJvciBvY2N1cnJlZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7UHJvbWlzZVJlamVjdGlvbkV2ZW50fSBldmVudCAtIFJlamVjdGlvbiBldmVudFxuICAgICAqL1xuICAgIGhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbihldmVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbQVBQXSBVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb246JywgZXZlbnQucmVhc29uKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBhcHBTdG9yZS5hZGROb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIHRpdGxlOiAnQXBwbGljYXRpb24gRXJyb3InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlLicsXG4gICAgICAgICAgICBkdXJhdGlvbjogMCAvLyBEb24ndCBhdXRvLXJlbW92ZSBjcml0aWNhbCBlcnJvcnNcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGdsb2JhbCBlcnJvcnNcbiAgICAgKiBAcGFyYW0ge0Vycm9yRXZlbnR9IGV2ZW50IC0gRXJyb3IgZXZlbnRcbiAgICAgKi9cbiAgICBoYW5kbGVHbG9iYWxFcnJvcihldmVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbQVBQXSBHbG9iYWwgZXJyb3I6JywgZXZlbnQuZXJyb3IpO1xuXG4gICAgICAgIC8vIE9ubHkgc2hvdyBub3RpZmljYXRpb24gZm9yIG5vbi1zY3JpcHQgZXJyb3JzXG4gICAgICAgIGlmICghZXZlbnQuZmlsZW5hbWUgfHwgIWV2ZW50LmZpbGVuYW1lLmluY2x1ZGVzKCcuanMnKSkge1xuICAgICAgICAgICAgYXBwU3RvcmUuYWRkTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnQXBwbGljYXRpb24gRXJyb3InLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgY29yZSBzeXN0ZW1zXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEluaXRpYWxpemF0aW9uIHByb21pc2VcbiAgICAgKi9cbiAgICBhc3luYyBpbml0aWFsaXplQ29yZVN5c3RlbXMoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBJbml0aWFsaXppbmcgY29yZSBzeXN0ZW1zLi4uJyk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBBUEkgc2VydmljZSB3aXRoIGF1dGhlbnRpY2F0aW9uIGludGVyY2VwdG9yXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUFwaVNlcnZpY2UoKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHN0YXRlIG1hbmFnZW1lbnRcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU3RhdGVNYW5hZ2VtZW50KCk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwZXJmb3JtYW5jZSBtb25pdG9yaW5nXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBlcmZvcm1hbmNlTW9uaXRvcmluZygpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBDb3JlIHN5c3RlbXMgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIEFQSSBzZXJ2aWNlIHdpdGggaW50ZXJjZXB0b3JzXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZUFwaVNlcnZpY2UoKSB7XG4gICAgICAgIC8vIEFkZCBhdXRoZW50aWNhdGlvbiByZXF1ZXN0IGludGVyY2VwdG9yXG4gICAgICAgIGJhc2VBcGlTZXJ2aWNlLmFkZFJlcXVlc3RJbnRlcmNlcHRvcihhc3luYyAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhcHBTdG9yZS5nZXRTdGF0ZSgpLnVzZXIudG9rZW47XG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIHJlc3BvbnNlIGludGVyY2VwdG9yIGZvciBlcnJvciBoYW5kbGluZ1xuICAgICAgICBiYXNlQXBpU2VydmljZS5hZGRSZXNwb25zZUludGVyY2VwdG9yKGFzeW5jIChkYXRhLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgLy8gSGFuZGxlIGNvbW1vbiBBUEkgcmVzcG9uc2UgcGF0dGVybnNcbiAgICAgICAgICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBuZXN0ZWQgc3VjY2Vzcy9kYXRhIHBhdHRlcm5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzID09PSBmYWxzZSAmJiBkYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBkYXRhIGZyb20gcmVzcG9uc2Ugd3JhcHBlclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MgJiYgZGF0YS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBsb2FkaW5nIHN0YXRlIG1hbmFnZW1lbnRcbiAgICAgICAgYmFzZUFwaVNlcnZpY2UuYWRkUmVxdWVzdEludGVyY2VwdG9yKGFzeW5jIChvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBhcHBTdG9yZS5zZXRMb2FkaW5nKCdhcGknLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICB9KTtcblxuICAgICAgICBiYXNlQXBpU2VydmljZS5hZGRSZXNwb25zZUludGVyY2VwdG9yKGFzeW5jIChkYXRhLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgYXBwU3RvcmUuc2V0TG9hZGluZygnYXBpJywgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgc3RhdGUgbWFuYWdlbWVudFxuICAgICAqL1xuICAgIGluaXRpYWxpemVTdGF0ZU1hbmFnZW1lbnQoKSB7XG4gICAgICAgIC8vIFNldCB1cCBzdGF0ZSBjaGFuZ2Ugb2JzZXJ2ZXJzXG4gICAgICAgIGFwcFN0b3JlLnN1YnNjcmliZSgnc3RhdGU6Y2hhbmdlZCcsIChldmVudCwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIFN0YXRlIGNoYW5nZWQ6JywgZGF0YS5jaGFuZ2VzKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU3RhdGVDaGFuZ2UoZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgdXNlciBhdXRoZW50aWNhdGlvbiBzdGF0ZSBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhZG1pblRva2VuJykgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBmb3JtYXQgKGJhc2ljIGNoZWNrKVxuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5zcGxpdCgnLicpLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICBhcHBTdG9yZS5zZXRVc2VyKHRydWUsIG51bGwsIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIFJlc3RvcmVkIGF1dGhlbnRpY2F0aW9uIGZyb20gbG9jYWxTdG9yYWdlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tBUFBdIEludmFsaWQgdG9rZW4gaW4gbG9jYWxTdG9yYWdlLCBjbGVhcmluZycpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhZG1pblRva2VuJyk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgc3RhdGUgY2hhbmdlc1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjaGFuZ2VEYXRhIC0gU3RhdGUgY2hhbmdlIGRhdGFcbiAgICAgKi9cbiAgICBoYW5kbGVTdGF0ZUNoYW5nZShjaGFuZ2VEYXRhKSB7XG4gICAgICAgIC8vIEhhbmRsZSBhdXRoZW50aWNhdGlvbiBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgIGlmIChjaGFuZ2VEYXRhLmNoYW5nZXNbJ3VzZXIuaXNBdXRoZW50aWNhdGVkJ10pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb25DaGFuZ2UoY2hhbmdlRGF0YS5jaGFuZ2VzWyd1c2VyLmlzQXV0aGVudGljYXRlZCddLnRvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBsb2FkaW5nIHN0YXRlIGNoYW5nZXNcbiAgICAgICAgaWYgKGNoYW5nZURhdGEuY2hhbmdlc1snbG9hZGluZy5nbG9iYWwnXSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVMb2FkaW5nQ2hhbmdlKGNoYW5nZURhdGEuY2hhbmdlc1snbG9hZGluZy5nbG9iYWwnXS50byk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYXV0aGVudGljYXRpb24gc3RhdGUgY2hhbmdlc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNBdXRoZW50aWNhdGVkIC0gTmV3IGF1dGhlbnRpY2F0aW9uIHN0YXRlXG4gICAgICovXG4gICAgaGFuZGxlQXV0aGVudGljYXRpb25DaGFuZ2UoaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBVc2VyIGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBVSSBmb3IgYXV0aGVudGljYXRlZCB1c2VyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUF1dGhlbnRpY2F0ZWRVSSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBVc2VyIGxvZ2dlZCBvdXQnKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBVSSBmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXV0aGVudGljYXRlZFVJKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBsb2FkaW5nIHN0YXRlIGNoYW5nZXNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9hZGluZyAtIE5ldyBsb2FkaW5nIHN0YXRlXG4gICAgICovXG4gICAgaGFuZGxlTG9hZGluZ0NoYW5nZShpc0xvYWRpbmcpIHtcbiAgICAgICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSAkKCcjZ2xvYmFsTG9hZGluZycpO1xuICAgICAgICBpZiAobG9hZGluZ092ZXJsYXkpIHtcbiAgICAgICAgICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9hZGluZ092ZXJsYXkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgVUkgYmFzZWQgb24gYXV0aGVudGljYXRpb24gc3RhdGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQXV0aGVudGljYXRlZCAtIEF1dGhlbnRpY2F0aW9uIHN0YXRlXG4gICAgICovXG4gICAgdXBkYXRlQXV0aGVudGljYXRlZFVJKGlzQXV0aGVudGljYXRlZCkge1xuICAgICAgICAvLyBVcGRhdGUgbmF2aWdhdGlvbiBlbGVtZW50c1xuICAgICAgICBjb25zdCBhZG1pbkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkbWluLWxpbmsnKTtcbiAgICAgICAgY29uc3QgbG9nb3V0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2dvdXQtYnRuJyk7XG5cbiAgICAgICAgYWRtaW5MaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xuICAgICAgICAgICAgbGluay5zdHlsZS5kaXNwbGF5ID0gaXNBdXRoZW50aWNhdGVkID8gJ2lubGluZScgOiAnbm9uZSc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvZ291dEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBpc0F1dGhlbnRpY2F0ZWQgPyAnaW5saW5lJyA6ICdub25lJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBwZXJmb3JtYW5jZSBtb25pdG9yaW5nXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZVBlcmZvcm1hbmNlTW9uaXRvcmluZygpIHtcbiAgICAgICAgLy8gTW9uaXRvciBwYWdlIGxvYWQgcGVyZm9ybWFuY2VcbiAgICAgICAgaWYgKHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2UudGltaW5nKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJmRGF0YSA9IHdpbmRvdy5wZXJmb3JtYW5jZS50aW1pbmc7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZFRpbWUgPSBwZXJmRGF0YS5sb2FkRXZlbnRFbmQgLSBwZXJmRGF0YS5uYXZpZ2F0aW9uU3RhcnQ7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BFUkZdIFBhZ2UgbG9hZCB0aW1lOiAke2xvYWRUaW1lfW1zYCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUcmFjayBwZXJmb3JtYW5jZSBtZXRyaWNzIGlmIGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoQXBwQ29uZmlnLmZlYXR1cmVzLmVuYWJsZUFuYWx5dGljcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3VsZCBzZW5kIHRvIGFuYWx5dGljcyBzZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgIGFwcFN0b3JlLm5vdGlmeSgncGVyZm9ybWFuY2U6cGFnZUxvYWQnLCB7IGxvYWRUaW1lIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTW9uaXRvciBtZW1vcnkgdXNhZ2UgKGlmIHN1cHBvcnRlZClcbiAgICAgICAgaWYgKHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2UubWVtb3J5KSB7XG4gICAgICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVtSW5mbyA9IHdpbmRvdy5wZXJmb3JtYW5jZS5tZW1vcnk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQRVJGXSBNZW1vcnk6ICR7TWF0aC5yb3VuZChtZW1JbmZvLnVzZWRKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQpfU1CIHVzZWRgKTtcbiAgICAgICAgICAgIH0sIDMwMDAwKTsgLy8gRXZlcnkgMzAgc2Vjb25kc1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBwYWdlLXNwZWNpZmljIG1vZHVsZXNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gSW5pdGlhbGl6YXRpb24gcHJvbWlzZVxuICAgICAqL1xuICAgIGFzeW5jIGluaXRpYWxpemVQYWdlTW9kdWxlcygpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIEluaXRpYWxpemluZyBwYWdlIG1vZHVsZXMgZm9yIHBhdGg6JywgY3VycmVudFBhdGgpO1xuXG4gICAgICAgIC8vIERldGVybWluZSB3aGljaCBwYWdlIHdlJ3JlIG9uXG4gICAgICAgIGlmIChjdXJyZW50UGF0aCA9PT0gJy8nIHx8IGN1cnJlbnRQYXRoID09PSAnL2luZGV4Lmh0bWwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVIb21lUGFnZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYXRoID09PSAnL2FkbWluLmh0bWwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVBZG1pblBhZ2UoKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGF0aCA9PT0gJy9yZXZpZXcuaHRtbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVJldmlld1BhZ2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBQYWdlIG1vZHVsZXMgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGhvbWUgcGFnZSBtb2R1bGVzXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEluaXRpYWxpemF0aW9uIHByb21pc2VcbiAgICAgKi9cbiAgICBhc3luYyBpbml0aWFsaXplSG9tZVBhZ2UoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAnaG9tZSc7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBJbml0aWFsaXppbmcgaG9tZSBwYWdlIG1vZHVsZXMnKTtcblxuICAgICAgICAvLyBEeW5hbWljIGltcG9ydCBmb3IgY29kZSBzcGxpdHRpbmdcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgSG9tZVBhZ2UgfSA9IGF3YWl0IGltcG9ydCgnLi9wYWdlcy9ob21lL2hvbWUucGFnZS5qcycpO1xuICAgICAgICAgICAgY29uc3QgaG9tZVBhZ2UgPSBuZXcgSG9tZVBhZ2UoKTtcbiAgICAgICAgICAgIGF3YWl0IGhvbWVQYWdlLmluaXQoKTtcblxuICAgICAgICAgICAgdGhpcy5tb2R1bGVzLnNldCgnaG9tZVBhZ2UnLCBob21lUGFnZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0FQUF0gSG9tZSBwYWdlIGluaXRpYWxpemVkJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQVBQXSBGYWlsZWQgdG8gbG9hZCBob21lIHBhZ2UgbW9kdWxlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYWRtaW4gcGFnZSBtb2R1bGVzXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEluaXRpYWxpemF0aW9uIHByb21pc2VcbiAgICAgKi9cbiAgICBhc3luYyBpbml0aWFsaXplQWRtaW5QYWdlKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gJ2FkbWluJztcbiAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIEluaXRpYWxpemluZyBhZG1pbiBwYWdlIG1vZHVsZXMnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBBZG1pblBhZ2UgfSA9IGF3YWl0IGltcG9ydCgnLi9wYWdlcy9hZG1pbi9hZG1pbi5wYWdlLmpzJyk7XG4gICAgICAgICAgICBjb25zdCBhZG1pblBhZ2UgPSBuZXcgQWRtaW5QYWdlKCk7XG4gICAgICAgICAgICBhd2FpdCBhZG1pblBhZ2UuaW5pdCgpO1xuXG4gICAgICAgICAgICB0aGlzLm1vZHVsZXMuc2V0KCdhZG1pblBhZ2UnLCBhZG1pblBhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIEFkbWluIHBhZ2UgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBUFBdIEZhaWxlZCB0byBsb2FkIGFkbWluIHBhZ2UgbW9kdWxlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgcmV2aWV3IHBhZ2UgbW9kdWxlc1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBJbml0aWFsaXphdGlvbiBwcm9taXNlXG4gICAgICovXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVJldmlld1BhZ2UoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAncmV2aWV3JztcbiAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIEluaXRpYWxpemluZyByZXZpZXcgcGFnZSBtb2R1bGVzJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgUmV2aWV3UGFnZSB9ID0gYXdhaXQgaW1wb3J0KCcuL3BhZ2VzL3Jldmlldy9yZXZpZXcucGFnZS5qcycpO1xuICAgICAgICAgICAgY29uc3QgcmV2aWV3UGFnZSA9IG5ldyBSZXZpZXdQYWdlKCk7XG4gICAgICAgICAgICBhd2FpdCByZXZpZXdQYWdlLmluaXQoKTtcblxuICAgICAgICAgICAgdGhpcy5tb2R1bGVzLnNldCgncmV2aWV3UGFnZScsIHJldmlld1BhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIFJldmlldyBwYWdlIGluaXRpYWxpemVkJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQVBQXSBGYWlsZWQgdG8gbG9hZCByZXZpZXcgcGFnZSBtb2R1bGU6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHVwIGdsb2JhbCBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBzZXR1cEdsb2JhbEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCdbZGF0YS1uYXZpZ2F0ZV0nKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYXZpZ2F0ZScpO1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUbyh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIYW5kbGUgZm9ybSBzdWJtaXNzaW9ucyBnbG9iYWxseVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIExldCBpbmRpdmlkdWFsIGNvbXBvbmVudHMgaGFuZGxlIHRoZWlyIGZvcm1zXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGp1c3QgZm9yIGdsb2JhbCBmb3JtIGhhbmRsaW5nIGlmIG5lZWRlZFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIYW5kbGUga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIEVTQyBrZXkgaGFuZGxpbmdcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvc2UgbW9kYWxzLCBjbGVhciBzZWxlY3Rpb25zLCBldGMuXG4gICAgICAgICAgICAgICAgYXBwU3RvcmUuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgdWk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByZXZTdGF0ZS51aSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZU1vZGFsOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhhbmRsZSBvbmxpbmUvb2ZmbGluZSBzdGF0dXNcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsICgpID0+IHtcbiAgICAgICAgICAgIGFwcFN0b3JlLmFkZE5vdGlmaWNhdGlvbih7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnQ29ubmVjdGlvbiBSZXN0b3JlZCcsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBhcmUgYmFjayBvbmxpbmUnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBhcHBTdG9yZS5hZGROb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0Nvbm5lY3Rpb24gTG9zdCcsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBhcmUgY3VycmVudGx5IG9mZmxpbmUnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwIC8vIERvbid0IGF1dG8tcmVtb3ZlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmF2aWdhdGUgdG8gYSBkaWZmZXJlbnQgcGFnZSBvciBzZWN0aW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldCAtIE5hdmlnYXRpb24gdGFyZ2V0XG4gICAgICovXG4gICAgbmF2aWdhdGVUbyh0YXJnZXQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIE5hdmlnYXRpbmcgdG86JywgdGFyZ2V0KTtcblxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IG5hdmlnYXRpb24gdHlwZXNcbiAgICAgICAgaWYgKHRhcmdldC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT09ICdhZG1pbicpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hZG1pbi5odG1sJztcbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT09ICdyZXZpZXcnKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvcmV2aWV3Lmh0bWwnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSGFuZGxlIGluLXBhZ2UgbmF2aWdhdGlvbiAoc2Nyb2xsaW5nLCBtb2RhbHMsIGV0Yy4pXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUluUGFnZU5hdmlnYXRpb24odGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBpbi1wYWdlIG5hdmlnYXRpb25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0IC0gTmF2aWdhdGlvbiB0YXJnZXRcbiAgICAgKi9cbiAgICBoYW5kbGVJblBhZ2VOYXZpZ2F0aW9uKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0LnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgLy8gSGFuZGxlIGFuY2hvciBsaW5rc1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9ICQodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBvdGhlciBpbi1wYWdlIG5hdmlnYXRpb25cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBJbi1wYWdlIG5hdmlnYXRpb24gdG86JywgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgZXJyb3Igbm90aWZpY2F0aW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBFcnJvciBtZXNzYWdlXG4gICAgICovXG4gICAgc2hvd0Vycm9yTm90aWZpY2F0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgYXBwU3RvcmUuYWRkTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogNTAwMFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgaW5pdGlhbGl6YXRpb24gZXJyb3JzXG4gICAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgLSBJbml0aWFsaXphdGlvbiBlcnJvclxuICAgICAqL1xuICAgIGhhbmRsZUluaXRpYWxpemF0aW9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0FQUF0gSW5pdGlhbGl6YXRpb24gZXJyb3I6JywgZXJyb3IpO1xuXG4gICAgICAgIC8vIFNob3cgZXJyb3IgaW4gVUlcbiAgICAgICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSAkKCcjZ2xvYmFsTG9hZGluZycpO1xuICAgICAgICBpZiAobG9hZGluZ092ZXJsYXkpIHtcbiAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2xvYmFsLWxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJnbG9iYWwtbG9hZGluZy10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIEZhaWxlZCB0byBpbml0aWFsaXplIGFwcGxpY2F0aW9uLjxicj5cbiAgICAgICAgICAgICAgICAgICAgPHNtYWxsPiR7ZXJyb3IubWVzc2FnZX08L3NtYWxsPjxicj48YnI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiIHN0eWxlPVwicGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kOiAjMDA3YmZmOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBSZWxvYWQgUGFnZVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IHRoZSBhcHBsaWNhdGlvbiBhbmQgY2xlYW4gdXAgcmVzb3VyY2VzXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tBUFBdIERlc3Ryb3lpbmcgYXBwbGljYXRpb24uLi4nKTtcblxuICAgICAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCB0aGlzLmhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbik7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuaGFuZGxlR2xvYmFsRXJyb3IpO1xuXG4gICAgICAgIC8vIERlc3Ryb3kgbW9kdWxlc1xuICAgICAgICB0aGlzLm1vZHVsZXMuZm9yRWFjaCgobW9kdWxlLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZS5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtBUFBdIERlc3Ryb3llZCBtb2R1bGU6ICR7bmFtZX1gKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQVBQXSBFcnJvciBkZXN0cm95aW5nIG1vZHVsZSAke25hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENsZWFyIG1vZHVsZXMgbWFwXG4gICAgICAgIHRoaXMubW9kdWxlcy5jbGVhcigpO1xuXG4gICAgICAgIC8vIFJlc2V0IHN0b3JlXG4gICAgICAgIGFwcFN0b3JlLnJlc2V0U3RhdGUoKTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBQXSBBcHBsaWNhdGlvbiBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYXBwbGljYXRpb24gaW5mb1xuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEFwcGxpY2F0aW9uIGluZm9ybWF0aW9uXG4gICAgICovXG4gICAgZ2V0SW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IEFwcENvbmZpZy5uYW1lLFxuICAgICAgICAgICAgdmVyc2lvbjogQXBwQ29uZmlnLnZlcnNpb24sXG4gICAgICAgICAgICBpbml0aWFsaXplZDogdGhpcy5pbml0aWFsaXplZCxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgbW9kdWxlczogQXJyYXkuZnJvbSh0aGlzLm1vZHVsZXMua2V5cygpKSxcbiAgICAgICAgICAgIGVudmlyb25tZW50OiBBcHBDb25maWcuZW52aXJvbm1lbnRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8vIENyZWF0ZSBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCB0b2lsZXRSZXZpZXdBcHAgPSBuZXcgVG9pbGV0UmV2aWV3QXBwKCk7XG5cbi8vIEF1dG8taW5pdGlhbGl6ZSB3aGVuIERPTSBpcyByZWFkeSAoaWYgbm90IHVzaW5nIG1hbnVhbCBpbml0aWFsaXphdGlvbilcbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgICB0b2lsZXRSZXZpZXdBcHAuaW5pdCgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBUFBdIEF1dG8taW5pdGlhbGl6YXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59IGVsc2Uge1xuICAgIC8vIERPTSBhbHJlYWR5IGxvYWRlZFxuICAgIHRvaWxldFJldmlld0FwcC5pbml0KCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbQVBQXSBBdXRvLWluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfSk7XG59XG5cbi8vIEV4cG9ydCBkZWZhdWx0XG5leHBvcnQgZGVmYXVsdCB0b2lsZXRSZXZpZXdBcHA7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/app.js\n\n}");

/***/ }

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Check if module exists (development only)
/******/ 		if (__webpack_modules__[moduleId] === undefined) {
/******/ 			var e = new Error("Cannot find module '" + moduleId + "'");
/******/ 			e.code = 'MODULE_NOT_FOUND';
/******/ 			throw e;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames not based on template
/******/ 			if (chunkId === "src_pages_review_review_page_js") return "js/chunks/" + chunkId + ".js";
/******/ 			// return url for filenames based on template
/******/ 			return "js/" + chunkId + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "toilet-review-system-frontend:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 		
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "/";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"app": 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunktoilet_review_system_frontend"] = self["webpackChunktoilet_review_system_frontend"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["core","services","vendors","src_state_store_app_store_js"], () => (__webpack_require__("./src/app.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;